{"version":3,"file":"commonHelpers.js","sources":["../src/img/err.svg","../src/img/x.svg","../src/js/error-handler.js","../src/js/markup.js","../src/js/api.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__33588f56__\"","export default \"__VITE_ASSET__6cc9f946__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorIcon from '../img/err.svg';\nimport xIcon from '../img/x.svg';\n\nexport function onWarning(message) {\n    iziToast.warning({\n        title: 'Sorry,',\n        titleColor: '#FFFFFF',\n        message,\n        messageColor: '#FFFFFF',\n        messageSize: '16px',\n        backgroundColor: '#FFA000',\n        iconUrl: dangIcon,\n        position: 'center',\n        close: false,\n        buttons: [\n            [\n                `<button type=\"button\" style=\"\n          background-color: #FFA000; \n          width: 20px; \n          height: 20px; \n          padding: 5px\">\n            <img style=\"\n              width: 10px; \n              height: 10px\" \n              src=${xIcon}>\n        </button>`,\n                function (instance, toast) {\n                    instance.hide({ transitionOut: 'fadeOut' }, toast);\n                },\n            ],\n        ]\n    });\n}\n\nexport function onRejected(error) {\n    iziToast.show({\n        title: 'Error',\n        titleColor: '#FFFFFF',\n        message: error.message,\n        messageColor: '#FFFFFF',\n        messageSize: '16px',\n        backgroundColor: '#EF4040',\n        iconUrl: errorIcon,\n        position: 'topRight',\n        close: false,\n        buttons: [\n            [\n                `<button type=\"button\" style=\"\n          background-color: #EF4040; \n          width: 20px; \n          height: 20px; \n          padding: 5px\">\n            <img style=\"\n              width: 10px; \n              height: 10px\" \n                src=${xIcon}>\n        </button>`,\n                function (instance, toast) {\n                    instance.hide({ transitionOut: 'fadeOut' }, toast);\n                },\n            ],\n        ]\n    });\n}","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { onWarning } from \"./error-handler\";\nconst lightbox = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: 'alt' });\nconst imageList = document.querySelector(\".gallery\");\n\n\nexport function renderImage({ totalHits, hits }) {\n  if (parseInt(totalHits) > 0) {\n    const markup = hits.map(createElementGallery).join('');\n    imageList.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n  } else {\n    imageList.innerHTML = '';\n    onWarning('there are no images matching your search query. Please try again!');\n  }\n}\n\nfunction createElementGallery({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `\n  <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n    </a>\n    <ul class=\"item-img\">\n      <li class=\"elem-img\">\n        <p class=\"elem-name\">Likes</p>\n        <p>${likes}</p>\n      </li>\n      <li class=\"elem-img\">\n        <p class=\"elem-name\">Views</p>\n        <p>${views}</p>\n      </li>\n      <li class=\"elem-img\">\n        <p class=\"elem-name\">Comments</p>\n        <p>${comments}</p>\n      </li>\n      <li class=\"elem-img\">\n        <p class=\"elem-name\">Downloads</p>\n        <p>${downloads}</p>\n      </li>\n    </ul>\n  </li>\n  `;\n}","import axios from \"axios\";\n\nexport async function fetchImage(keyWord, page) {\n    const BASE_URL = 'https://pixabay.com/';\n    const END_POINT = 'api/';\n    const PARAMS = new URLSearchParams({\n        key: '42208232-118910d8102453b47e924ae6c',\n        q: keyWord,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n    });\n\n    const URL = `${BASE_URL}${END_POINT}?${PARAMS}`;\n    const { data } = await axios(URL)\n\n    return data;\n}","import { renderImage } from './js/markup';\nimport { fetchImage } from './js/api';\nimport { onRejected, onWarning } from './js/error-handler';\n\nconst imageList = document.querySelector(\".gallery\");\nconst form = document.querySelector(\"#searchForm\");\nconst loaderContainer = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\"#load\");\nlet currentPage = 1;\nlet query = \"\";\n\nform.addEventListener(\"submit\", onSearch);\nloadMore.addEventListener(\"click\", onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  const keyWord = event.target.keyword.value.trim();\n  if (!keyWord) {\n    return;\n  }\n  imageList.innerHTML = '';\n  loaderContainer.style.display = 'block';\n  query = keyWord;\n  currentPage = 1;\n  try {\n    const images = await fetchImage(query, currentPage);\n    if (images.hits.length === 0) {\n      loadMore.style.display = 'none';\n      onWarning('There are no images matching your search query. Please try again!');\n    } else {\n      renderImage(images);\n      smoothScroll();\n      if (images.hits.length < 15) {\n        loadMore.style.display = 'none';\n        onWarning(\"We're sorry, but you've reached the end of search results.\");\n      } else {\n        loadMore.style.display = 'block';\n      }\n    }\n    form.reset();\n  } catch (error) {\n    onRejected(error);\n  } finally {\n    loaderContainer.style.display = 'none';\n  }\n}\n\n\n\nasync function onLoadMore() {\n  currentPage += 1;\n  loaderContainer.style.display = 'block';\n  try {\n    const images = await fetchImage(query, currentPage);\n    renderImage(images);\n    smoothScroll();\n    if (currentPage >= Math.ceil(images.totalHits / 15)) {\n      onWarning(\"We're sorry, but you've reached the end of search results.\");\n      loadMore.style.display = 'none';\n    }\n  } catch (error) {\n    onRejected(error);\n  } finally {\n    loaderContainer.style.display = 'none';\n  }\n}\n\n\nfunction smoothScroll() {\n  const { height } = imageList.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: \"smooth\",\n  });\n}"],"names":["errorIcon","xIcon","onWarning","message","iziToast","instance","toast","onRejected","error","lightbox","SimpleLightbox","imageList","renderImage","totalHits","hits","markup","createElementGallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchImage","keyWord","page","BASE_URL","END_POINT","PARAMS","URL","data","axios","form","loaderContainer","loadMore","currentPage","query","onSearch","onLoadMore","event","images","smoothScroll","height"],"mappings":"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"}